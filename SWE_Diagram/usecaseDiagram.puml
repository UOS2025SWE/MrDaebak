@startuml
---
title: Mr. Daebak Dinner Delivery System Use Case Diagram (v2)
---
left to right direction

actor Customer as "Customer"
actor Staff as "Staff"
actor Manager as "Manager (Owner)"
actor Payment_System as "<<External System>>\nPayment System"
actor ASR_API as "<<External System>>\nSpeech Recognition (ASR) API"
actor LLM_API as "<<External System>>\nLLM API"
actor GenAI_Image_API as "<<External System>>\nGenerative AI Image API"

rectangle "Mr. Daebak System" {
  Customer -- (Sign Up)
  Customer -- (Log In)
  Customer -- (Reset Password)
  Customer -- (Browse Menu)
  Customer -- (Place Order)
  Customer -- (Order via Voice Assistant)
  Customer -- (View Past Orders)
  Customer -- (Quick Order)
  Customer -- (Modify Dinner Package)
  Customer -- (Schedule Delivery Date)

  Staff -- (Log In)
  Staff -- (Receive and Confirm Order)
  Staff -- (Manage Order Status)
  Staff -- (View Order Details)
  Staff -- (Record Ingredient Intake)
  Staff -- (Deduct Inventory for Cooking)

  Manager -- (Manage Staff)
  Manager -- (Manage Inventory and Accounting)

  (Place Order) ..> (Make Payment) : <<include>>
  (Order via Voice Assistant) ..> (Make Payment) : <<include>>
  (Quick Order) ..> (Make Payment) : <<include>>

  (Place Order) ..> (Apply Regular Customer Discount) : <<extend>>
  (Place Order) ..> (Request Custom Decoration) : <<extend>>
  (Order via Voice Assistant) ..> (Request Custom Decoration) : <<extend>>
  (Order via Voice Assistant) ..> (Modify Dinner Package) : <<extend>>
  (Order via Voice Assistant) ..> (Schedule Delivery Date) : <<extend>>
  (Place Order) ..> (Modify Dinner Package) : <<extend>>
  (Place Order) ..> (Schedule Delivery Date) : <<include>>
  (Modify Dinner Package) ..> (Schedule Delivery Date) : <<include>>

  (View Past Orders) ..> (Log In) : <<include>>
  (Quick Order) ..> (Log In) : <<include>>
  (Place Order) ..> (Log In) : <<include>>
  (Modify Dinner Package) ..> (Log In) : <<include>>

  (Make Payment) -- Payment_System

  (Order via Voice Assistant) -- ASR_API
  (Order via Voice Assistant) -- LLM_API

  (Request Custom Decoration) -- LLM_API
  (Request Custom Decoration) -- GenAI_Image_API
  (Manage Order Status) ..> (Deduct Inventory for Cooking) : <<include>>
  (Record Ingredient Intake) ..> (Manage Inventory and Accounting) : <<extend>>
}

Manager --|> Staff
@enduml