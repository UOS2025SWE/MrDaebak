Dinner Service System Level 1 서브시스템 설명

================================================================================

전체 시스템은 아래의 서브시스템으로 구성된다.
- Frontend 시스템
- Backend 시스템
- Database System
- AI Services 시스템
- Speech Services 시스템
- Payment Integration 시스템


Frontend 시스템
- 웹 기반 사용자 인터페이스를 제공하는 클라이언트 애플리케이션이다.
- 고객용 주문 시스템(Customer Web App)과 관리자/직원용 백오피스(Admin & Staff Web App)를 포함한다.
- 음성 주문, 실시간 주문 추적, 결제 등의 기능을 제공한다.
- Next.js 15.5.2, React 19.1.0, TypeScript 5.x를 사용하여 작성된다.
- Tailwind CSS 3.4.0로 스타일링을 처리한다.


Backend 시스템
- RESTful API 및 WebSocket을 제공하는 애플리케이션 서버이다.
- 비즈니스 로직, 데이터 처리, 외부 서비스 통합을 담당한다.
- 14개의 API Router, 10개의 Domain Service, Integration & Realtime Layer, Persistence Layer로 구성된다.
- FastAPI, SQLAlchemy, Python 3.13을 사용하여 작성된다.
- JWT 기반 인증과 WebSocket 실시간 통신을 지원한다.


Database System
- PostgreSQL 기반 관계형 데이터베이스로 모든 애플리케이션 데이터를 영구 저장한다.
- 주문, 사용자, 메뉴, 재고, 이벤트, 결제 정보 등을 관리한다.
- SQLAlchemy ORM을 통해 접근하며, Connection Pooling과 Transaction Management를 제공한다.
- PostgreSQL (최신 버전)을 DBMS로 사용한다.
- Docker 환경에서 포트 15432를 사용하며 데이터베이스 이름은 dinner_service이다.


AI Services 시스템
- Google Gemini AI를 활용한 대화형 주문 시스템 및 이미지 생성 기능을 제공한다.
- LLM 구성 요소는 음성 주문 분석, 7단계 주문 플로우 관리, 개인화 추천을 담당한다.
- Image Generation 구성 요소는 케이크 커스터마이징을 위한 텍스트 기반 이미지 생성 및 편집 기능을 제공한다.
- Google Gemini API (gemini-2.5-flash, gemini-2.5-flash-image 모델)를 사용한다.
- google-genai Python SDK로 작성된다.


Speech Services 시스템
- OpenAI API를 활용한 음성 인식(STT) 및 음성 합성(TTS) 기능을 제공한다.
- STT 구성 요소는 음성 파일을 텍스트로 변환하여 AI 주문 분석에 전달한다.
- TTS 구성 요소는 AI 응답 텍스트를 음성으로 변환하여 고객에게 전달한다.
- OpenAI API (gpt-4o-mini-transcribe, gpt-4o-mini-tts 모델)를 사용한다.
- OpenAI Python SDK v1.x로 작성된다.


Payment Integration 시스템
- Mock Payment Gateway를 통한 결제 시뮬레이션 시스템으로 전체 결제 플로우를 검증한다.
- 결제 처리, 결제 조회, 사용자 결제 내역 조회 기능을 제공한다.
- 카드 정보 마스킹, 거래 ID 생성, 결제 상태 관리를 담당한다.
- 프로덕션 환경에서는 실제 PG사 API로 전환 가능한 인터페이스 구조를 가진다.
- Python (PaymentService 클래스)으로 작성된다.


================================================================================
서브시스템 간 의존관계
================================================================================

컴포넌트 다이어그램에서 서브시스템 간의 점선은 다음의 경우를 의미한다.
- 시작 서브시스템이 대상 서브시스템의 기능을 호출하거나 데이터를 요청하는 의존관계
- 시작 서브시스템으로부터 대상 서브시스템으로 메시지 또는 데이터가 전달되는 경우


Frontend → Backend
- Frontend는 Backend의 RESTful API를 호출하여 데이터를 조회하고 조작한다.
- Frontend는 Backend의 WebSocket 서버에 연결하여 실시간 주문 상태 업데이트를 수신한다.
- HTTP/REST 프로토콜과 WebSocket 프로토콜을 사용한다.


Backend → PostgreSQL
- Backend는 PostgreSQL 데이터베이스에 애플리케이션 데이터를 저장하고 조회한다.
- SQLAlchemy ORM을 통해 데이터베이스 연산을 수행한다.
- PostgreSQL Wire Protocol을 사용한다.


Backend → LLM
- Backend의 GeminiService는 Google Gemini LLM API를 호출하여 음성 주문을 분석하고 AI 응답을 생성한다.
- 과거 주문 이력과 이벤트 정보를 컨텍스트로 주입하여 개인화된 추천을 제공한다.
- HTTPS 프로토콜과 google-genai SDK를 사용한다.


Backend → Stable Diffusion (Image Generation)
- Backend의 GeminiImageService는 Google Gemini Image API를 호출하여 케이크 이미지를 생성하고 편집한다.
- 텍스트 기반 이미지 생성과 이미지 편집 기능을 제공한다.
- HTTPS 프로토콜과 google-genai SDK를 사용한다.


Backend → STT
- Backend의 OpenAIAudioService는 OpenAI STT API를 호출하여 고객의 음성을 텍스트로 변환한다.
- 변환된 텍스트는 Gemini LLM으로 전달되어 주문 의도를 분석한다.
- HTTPS 프로토콜과 OpenAI Python SDK를 사용한다.


Backend → TTS
- Backend의 OpenAIAudioService는 OpenAI TTS API를 호출하여 AI 응답 텍스트를 음성으로 변환한다.
- 생성된 음성은 Frontend로 전달되어 고객에게 재생된다.
- HTTPS 프로토콜과 OpenAI Python SDK를 사용한다.


Backend → Mock Payment Gateway
- Backend의 PaymentService는 Mock Payment Gateway를 통해 결제를 처리한다.
- 결제 성공 시 주문 상태를 업데이트하고 결제 정보를 데이터베이스에 저장한다.
- 내부 메서드 호출로 구현되어 있으며, 프로덕션 환경에서는 HTTPS 프로토콜을 사용하는 실제 PG사 API로 전환된다.


================================================================================

이상으로 6개의 서브시스템과 의존관계에 대한 설명을 마친다.
