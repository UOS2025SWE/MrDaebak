# UC02: Place Dinner Order - GUI or Voice

## 유즈케이스 ID
**MRD-CUS-UC02**

## 액터
- **주 액터**: Customer
- **부 액터**: PaymentSystem (외부 API), LLM (외부 API), STT & TTS (외부 API)

## 요약
고객이 GUI 또는 음성을 통해 메뉴를 선택하고 커스터마이징하여 저녁 식사 주문을 생성하고 결제한다.

## 유형
**Primary**

## 참고 유즈케이스
- **Include**: 없음
- **Extend**: 없음

## 사전 조건
고객이 로그인되어 있으며 배달 가능한 시간대이다

## 사후 조건
(성공 시) 주문이 생성되고 결제가 완료되며 주문 번호가 발급된다, (실패 시) 오류 메시지가 표시되고 주문이 생성되지 않는다

## 주흐름

1. 고객이 메뉴, 스타일, 수량, 커스터마이징 옵션, 사이드 디시, 케이크, 배달 정보, 결제 정보를 선택하여 시스템에 제출한다
2. 시스템이 주문을 생성하고 결제를 처리하여 주문 확인 정보(주문 ID, 주문 번호, 가격, 결제 상태)를 반환한다
3. 고객이 음성 주문(오디오)을 시스템에 제출한다
4. 시스템이 음성을 텍스트로 변환하고 AI 기반 메뉴 추천(메뉴, 스타일, 수량, 커스터마이징)을 제공한다
5. 고객이 AI가 제안한 주문 내용을 확인하여 시스템에 제출한다
6. 시스템이 주문을 생성하고 주문 확인 정보(주문 ID, 가격)를 반환한다

## 부흐름

### 2a. 결제 실패
(3) 결제 시스템으로부터 결제 실패 신호를 수신한다.
(4) 시스템이 "결제에 실패했습니다. 다시 시도해 주세요." 메시지를 표시한다.
흐름 (1)로 복귀한다.

### 2b. 재고 부족
(3) 시스템이 선택한 메뉴의 재고가 부족함을 감지한다.
(4) 시스템이 "선택하신 메뉴의 재료가 부족합니다. 다른 메뉴를 선택해 주세요." 메시지를 표시한다.
흐름 (1)로 복귀한다.

### 4a. 음성 인식 실패
(5) STT 서비스가 오디오를 텍스트로 변환하지 못한다.
(6) 시스템이 "음성을 인식할 수 없습니다. 다시 시도해 주세요." 메시지를 표시한다.
흐름 (3)으로 복귀한다.

### 4b. AI 분석 실패
(5) LLM이 고객 의도를 분석하지 못한다.
(6) 시스템이 "주문 내용을 이해할 수 없습니다. 다시 말씀해 주세요." 메시지를 표시한다.
흐름 (3)으로 복귀한다.

## 제약사항
- 주문은 설정된 배달 가능 시간 내에서만 접수 가능하다.
- 모든 주문은 결제가 완료되어야 최종 확정되며, 음성 주문은 AI 분석 결과를 고객이 확인 후 진행된다.
